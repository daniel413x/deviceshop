"use strict";(self.webpackChunkdeviceshop=self.webpackChunkdeviceshop||[]).push([[161],{3592:function(e,a,s){s(2791);var t=s(6871),n=s(5499),r=s(259),i=s(2249),c=s(184);a.Z=function(){var e="/account"===(0,t.TH)().pathname;return(0,c.jsx)("div",{className:"left-side-col ".concat(e&&"show"),children:(0,c.jsxs)("div",{className:"labeled-col",children:[(0,c.jsx)("span",{className:"label",children:"Your account"}),(0,c.jsx)(i.Z,{items:n.oB,renderAs:function(e){var a=e.to,s=e.label;return(0,c.jsxs)("li",{children:[(0,c.jsx)("div",{className:"divider"}),(0,c.jsx)(r.Z,{to:a,label:s})]},"".concat(a,"_navButton"))}})]})})}},9193:function(e,a,s){var t=s(885),n=s(2791),r=s(2113),i=s(3426),c=s(184);function l(e){var a=e.imageClass,s=e.buttonClass,l=e.initialImage,o=e.pressedSubmit,u=e.setPressedSubmit,d=e.onChange,v=e.onChangeWith,f=e.name,m=e.id,h=e.tabbable,p=(0,n.useState)(),x=(0,t.Z)(p,2),j=x[0],b=x[1],Z=(0,n.useState)(""),N=(0,t.Z)(Z,2),w=N[0],g=N[1],C=(0,r.Z)({value:j,setPressedSubmit:u,pressedSubmit:o}).warn,k=(0,n.useRef)(null),S=d||function(e){e.target.files&&0!==e.target.files.length?b(e.target.files[0]):b(void 0)};return(0,n.useEffect)((function(){return g(l||"")}),[l]),(0,n.useEffect)((function(){if(v&&v(),j&&l){var e=URL.createObjectURL(j);return g(e),function(){return URL.revokeObjectURL(e)}}if(!j&&l)return g(l);if(!j)return g("");var a=URL.createObjectURL(j);return g(a),function(){return URL.revokeObjectURL(a)}}),[j]),(0,c.jsxs)(i.Z,{buttonStyle:"blank",className:"button-overlay preview ".concat(s),onClick:function(){var e;return null===(e=k.current)||void 0===e?void 0:e.click()},tabIndex:h,children:[(0,c.jsx)("img",{src:w,alt:"Uploaded file",className:"preview ".concat(a)}),(0,c.jsx)("input",{id:m,type:"file",onChange:S,className:"replace-image-input hidden ".concat(C&&"warn"),name:f,ref:k}),(0,c.jsx)("div",{className:"replace-message",children:"Replace"})]})}l.defaultProps={id:"",imageClass:"",buttonClass:"",initialImage:"",onChange:void 0,onChangeWith:void 0,pressedSubmit:!1,setPressedSubmit:!1,tabbable:void 0},a.Z=l},7161:function(e,a,s){s.r(a),s.d(a,{default:function(){return U}});var t=s(885),n=s(2791),r=s(32),i=s(4942),c=s(5861),l=s(7757),o=s.n(l),u=s(3958),d=s(7155),v=s(1733),f=s(3426),m=s(7142),h=s(8816),p=s(8886),x=s(184);function j(e){var a=e.close,s=e.field,r=e.previous,l=(0,n.useContext)(u.Z),j=l.notifications,b=l.user,Z=(0,n.useState)(!1),N=(0,t.Z)(Z,2),w=N[0],g=N[1],C=(0,n.useState)(""),k=(0,t.Z)(C,2),S=k[0],y=k[1],R=(0,n.useState)(""),U=(0,t.Z)(R,2),L=U[0],P=U[1],E=function(){var e=(0,c.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(!0),e.prev=2,e.next=5,(0,d.uz)((0,i.Z)({},s,S));case 5:n=e.sent,b.set(n),a(),j.message("Field updated"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),j.error(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(a){return e.apply(this,arguments)}}(),I=(0,v.u)(s),D="password"===s;return(0,n.useEffect)((function(){s&&(g(!1),y(""))}),[s]),(0,x.jsxs)(p.Z,{show:s,close:a,className:"edit-field",id:"edit-field",size:"medium",children:[(0,x.jsxs)("div",{className:"window-header",children:[(0,x.jsx)("div",{className:"left-col",children:(0,x.jsx)("span",{className:"name",children:"Change field"})}),(0,x.jsx)(m.Z,{onMouseDown:a})]}),(0,x.jsxs)("form",{onSubmit:E,children:[(0,x.jsxs)("div",{className:"body",children:[(0,x.jsx)("h2",{className:"header",children:"Enter new value"}),(0,x.jsx)(h.Z,{label:I||"Field",input:S,setInput:y,placeholder:(null===r||void 0===r?void 0:r.toString())||"false",type:D?"password":"input",id:"new-value"}),D&&(0,x.jsx)(h.Z,{label:"Confirm password",input:L,setInput:P,placeholder:"",type:"password",id:"confirm-password"})]}),(0,x.jsxs)("div",{className:"bottom-buttons",children:[(0,x.jsx)(f.Z,{className:"submit-button ".concat(w&&"blocked"," ").concat(D&&S!==L&&"blocked"," ").concat(!S&&"blocked"),type:"submit",children:"Confirm"}),(0,x.jsx)(f.Z,{onClick:a,children:"Close"})]})]})]})}j.defaultProps={previous:""};var b=j,Z=s(2249),N=s(7163);function w(e){var a=e.field,s=e.value,t=e.openEditFieldModal,n="avatar"===a,r=(0,v.u)(a);return(0,x.jsxs)("div",{className:"field",children:[(0,x.jsxs)("div",{className:"field-value-col",children:[(0,x.jsx)("span",{className:"key",children:r}),(0,x.jsxs)("span",{className:"value",children:[!n&&(s||"Blank"),n&&(0,x.jsx)("img",{src:"".concat("https://deviceshop.onrender.com/").concat(s),alt:"Your avatar",className:"avatar"})]})]}),(0,x.jsx)(N.Z,{children:(0,x.jsx)(f.Z,{onClick:t,children:"Change"})})]})}w.defaultProps={value:""};var g=w,C=s(8224),k=s(9193);var S=function(e){var a=e.close,s=e.show,r=(0,n.useContext)(u.Z),i=r.notifications,l=r.user,v=(0,n.useState)(!1),h=(0,t.Z)(v,2),j=h[0],b=h[1],Z=(0,n.useState)(!1),N=(0,t.Z)(Z,2),w=N[0],g=N[1],S=function(){var e=(0,c.Z)(o().mark((function e(a){var s,t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),b(!0),s=new FormData(a.currentTarget),e.next=6,(0,d.uz)(s);case 6:t=e.sent,n=t.avatar,l.setAvatar(n),g(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),i.error("".concat(e.t0.response.data.message));case 15:return e.prev=15,b(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(a){return e.apply(this,arguments)}}();return(0,x.jsxs)(p.Z,{show:s,close:a,className:"edit-avatar",id:"edit-avatar",size:"medium",children:[(0,x.jsxs)("div",{className:"window-header",children:[(0,x.jsx)("div",{className:"left-col",children:(0,x.jsx)("span",{className:"name",children:"Change field"})}),(0,x.jsx)(m.Z,{onMouseDown:a})]}),(0,x.jsxs)("form",{onSubmit:S,children:[(0,x.jsx)("div",{className:"body",children:(0,x.jsx)(k.Z,{name:"avatar",initialImage:l.avatar?"".concat("https://deviceshop.onrender.com/").concat(l.avatar):"",onChangeWith:function(){return g(!1),void b(!1)}})}),(0,x.jsxs)("div",{className:"bottom-buttons",children:[(0,x.jsxs)(f.Z,{className:"submit-button ".concat((j||w)&&"blocked"),id:"edit-avatar-save-button",type:"submit",children:[w&&(0,x.jsx)(C.r,{}),"".concat(w?"Your avatar was changed":"Save")]}),(0,x.jsx)(f.Z,{onClick:a,children:"Close"})]})]})]})},y=s(8110),R=s(3592);var U=(0,r.Pi)((function(){var e=(0,n.useContext)(u.Z).user,a=(0,n.useState)(""),s=(0,t.Z)(a,2),r=s[0],i=s[1],c=(0,n.useState)(!1),l=(0,t.Z)(c,2),o=l[0],d=l[1],v=(0,n.useState)(""),f=(0,t.Z)(v,2),m=f[0],h=f[1],p=[{field:"avatar",value:e.avatar},{field:"firstName",value:e.firstName},{field:"lastName",value:e.lastName},{field:"password",value:"***"},{field:"phoneNumber",value:e.phoneNumber}];return(0,x.jsxs)(y.Z,{id:"credentials",header:"Your account details",leftSideCol:(0,x.jsx)(R.Z,{}),children:[(0,x.jsx)(b,{field:r,previous:m,close:function(){i(""),h("")}}),(0,x.jsx)(S,{show:o,close:function(){return d(!1)}}),(0,x.jsx)(Z.Z,{childrenBefore:!0,className:"field-ul",items:p,renderAs:function(e){return(0,x.jsx)("li",{children:(0,x.jsx)(g,{field:e.field,value:e.value,openEditFieldModal:"avatar"===e.field?function(){return d(!0)}:function(){return a=e.field,s=e.value,i(a),void h(s||"");var a,s}})},e.field)}})]})}))}}]);
//# sourceMappingURL=161.28692ba0.chunk.js.map