"use strict";(self.webpackChunkdeviceshop=self.webpackChunkdeviceshop||[]).push([[986],{9561:function(e,t,r){r(2791);var n=r(184);t.Z=function(e){var t=e.discount;return(0,n.jsxs)("span",{className:"discount-tag",children:["-",t,"%"]})}},4912:function(e,t,r){r(2791);var n=r(1733),a=r(184);function s(e){var t=e.price,r=e.discount,s=(0,n.T4)((0,n.ti)(t)),c=(0,n.T4)((0,n.ti)(t,r));return(0,a.jsxs)("div",{className:"price-tags ".concat(r&&"with-discount"),children:[(0,a.jsxs)("span",{className:"undiscounted-price",children:["$",s]}),r&&(0,a.jsxs)("span",{className:"discounted-price",children:["$",c]})]})}s.defaultProps={discount:""},t.Z=s},7119:function(e,t,r){var n=r(5861),a=r(885),s=r(7757),c=r.n(s),i=r(2791),o=r(3641),u=r(2249),d=r(6632),l=r(184);t.Z=function(){var e=(0,i.useState)([]),t=(0,a.Z)(e,2),r=t[0],s=t[1],p=localStorage.getItem("recentlyViewedIds");return(0,i.useEffect)((function(){p&&(0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=5;break}return e.next=3,(0,o.t2)({where:{id:JSON.parse(p)}});case 3:t=e.sent,s(t.rows.slice().sort((function(e,t){var r=p.indexOf(e.id);return p.indexOf(t.id)>r?-1:1})));case 5:case"end":return e.stop()}}),e)})))()}),[p]),0===r.length?null:(0,l.jsxs)("div",{className:"recently-viewed-products",children:[(0,l.jsx)("div",{className:"divider"}),(0,l.jsx)("h4",{className:"header",children:"Recently viewed products"}),(0,l.jsx)(u.Z,{className:"products-ul",items:r,renderAs:function(e){return(0,l.jsx)("li",{children:(0,l.jsx)(d.Z,{product:e,expanded:!0})},e.id)}})]})}},6632:function(e,t,r){r(2791);var n=r(501),a=r(4359),s=r(1733),c=r(2249),i=r(4912),o=r(773),u=r(4256),d=r(184);function l(e){var t=e.product,r=e.expanded,l=e.listView,p=t.name,f=t.price,v=t.discount,h=t.brand.name,m=t.type.name,x=t.rating,g=t.reviews,j=t.specificationsByCategory,w=t.id,N=t.thumbnail,Z=(0,s.Cb)(p),b=l?(0,s.BL)(j):(0,s.zq)(j),y=r&&!l,S=l;return(0,d.jsxs)(n.OL,{className:"shop-product-card ".concat(r&&"expanded"," ").concat(l&&"list-view"),to:"/".concat(a.lf,"/").concat(Z),title:p,children:[(0,d.jsx)(u.Z,{children:(0,d.jsxs)("div",{className:"img-wrapper",children:[(0,d.jsx)("img",{src:"".concat("https://deviceshop.onrender.com/").concat(N),alt:"Shop now"}),(0,d.jsx)(i.Z,{price:f,discount:v})]})}),(0,d.jsxs)("div",{className:"lower-col",children:[(0,d.jsx)("span",{className:"name",children:p}),(0,d.jsxs)("div",{className:"brand-rating-row",children:[!r&&(0,d.jsx)("span",{className:"brand",children:h}),(0,d.jsx)(o.Z,{rating:Number(x),nameForKey:p}),r&&(0,d.jsx)("span",{className:"review-count",children:"(".concat(g.length,")")})]}),y&&(0,d.jsx)("div",{className:"attributes",children:b}),S&&(0,d.jsx)("div",{className:"attributes",children:(0,d.jsx)(c.Z,{items:b,className:"attributes-column-ul",renderAs:function(e){return(0,d.jsx)("li",{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"label",children:e.category}),(0,d.jsx)(c.Z,{items:e.values,className:"values-ul",renderAs:function(t,r){return(0,d.jsx)("li",{children:(0,d.jsx)("span",{children:t})},"".concat(w).concat(e.category).concat(t).concat(r))}})]})},"".concat(w).concat(e.category))}})}),r&&(0,d.jsx)("div",{className:"type",children:m})]})]})}l.defaultProps={expanded:!1,listView:!1},t.Z=l},4256:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(2791),a=r(5861),s=r(885),c=r(7757),i=r.n(c);function o(e,t){var r;return"string"===typeof e?t?(null!==(r=t[e])&&void 0!==r||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}var u=function(e){return"function"===typeof e},d={any:0,all:1};function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.root,a=r.margin,s=r.amount,c=void 0===s?"any":s;if("undefined"===typeof IntersectionObserver)return function(){};var i=o(e),l=new WeakMap,p=function(e){e.forEach((function(e){var r=l.get(e.target);if(e.isIntersecting!==Boolean(r))if(e.isIntersecting){var n=t(e);u(n)?l.set(e.target,n):f.unobserve(e.target)}else r&&(r(e),l.delete(e.target))}))},f=new IntersectionObserver(p,{root:n,rootMargin:a,threshold:"number"===typeof c?c:d[c]});return i.forEach((function(e){return f.observe(e)})),function(){return f.disconnect()}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.root,a=t.margin,c=t.amount,i=t.once,o=void 0!==i&&i,u=(0,n.useState)(!1),d=(0,s.Z)(u,2),p=d[0],f=d[1];return(0,n.useEffect)((function(){if(!(!e.current||o&&p)){var t={root:r&&r.current||void 0,margin:a,amount:"some"===c?"any":c};return l(e.current,(function(){return f(!0),o?void 0:function(){return f(!1)}}),t)}}),[r,e,a,o]),p}var f=function(e){var t=e.ref,r=e.func,c=e.timeout,o=void 0===c?350:c,u=(0,n.useState)(!1),d=(0,s.Z)(u,2),l=d[0],f=d[1],v=(0,n.useState)(!1),h=(0,s.Z)(v,2),m=h[0],x=h[1],g=p(t);return(0,n.useEffect)((function(){g&&!l&&setTimeout((function(){g&&(f(!0),r&&(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:return e.prev=3,x(!0),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})))())}),o)}),[g]),{fixated:l,loaded:m}},v=r(184),h=(0,n.forwardRef)((function(e,t){var r=e.className,a=e.children,s=e.id,c=e.timeout,i=e.func,o=(0,n.useRef)(null),u=t||o,d=f({ref:u,func:i,timeout:c,id:s}),l=d.fixated,p=d.loaded,h=i&&!p;return(0,v.jsx)("div",{className:"".concat(r," shown-in-view ").concat((i&&p||!i&&l)&&"show"),id:s,ref:u,style:{height:h?"100vh":""},children:a})}));h.defaultProps={className:"",id:void 0,timeout:void 0,func:void 0};var m=h},8152:function(e,t,r){r(2791);var n=r(259),a=r(184);t.Z=function(e){var t=e.sortButtons,r=e.label;return(0,a.jsxs)("div",{className:"sort-dropdown",children:[(0,a.jsx)("span",{children:"Sort by:"}),(0,a.jsx)(n.Z,{label:r||t[0].label,to:t,dropdownIcon:"angle",colorStyle:"gray"}),(0,a.jsx)("div",{className:"divider vertical"})]})}},9372:function(e,t,r){var n=r(1413),a=r(885),s=r(2791),c=r(1733),i=r(584);t.Z=function(e){var t=e.itemsPerPage,r=e.itemsInDb,o=e.concurrentlySetQuery,u=(0,i.Z)(o?{page:"1"}:{}),d=u.searchParams,l=u.setSearchParams,p=u.searchParamsRecord,f=Number(d.get("page"))||1,v=(0,s.useState)(1),h=(0,a.Z)(v,2),m=h[0],x=h[1],g=(0,s.useState)(1),j=(0,a.Z)(g,2),w=j[0],N=j[1],Z=(0,s.useState)(!1),b=(0,a.Z)(Z,2),y=b[0],S=b[1],k=function(e){x(e>w||e<1?w:e),o&&l((0,n.Z)((0,n.Z)({},p),{},{page:e.toString()}))};return(0,s.useEffect)((function(){var e=(0,c.WV)(r,t);N(e||1),e>0&&m>e&&k(e)}),[r,t]),(0,s.useEffect)((function(){m!==f&&x(f)}),[f]),(0,s.useEffect)((function(){S(m===w)}),[m,w,f]),{page:m,pageLimit:w,pageLimitReached:y,changePage:k,nextPage:function(){return k(m+1)},prevPage:function(){return k(m-1)}}}},1154:function(e,t,r){r.d(t,{U$:function(){return u},ZY:function(){return i},n_:function(){return o}});var n=r(5861),a=r(7757),s=r.n(a),c=r(5229),i=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.post("api/orderedproduct",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.get("api/review/eligibility/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.delete("api/orderedproduct/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},3986:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var n=r(5861),a=r(885),s=r(7757),c=r.n(s),i=r(2791),o=r(6871),u=r(3641),d=r(32),l=r(3958),p=r(1733),f=r(6252),v=r(3426),h=r(9561),m=r(3910),x=r(1154),g=r(4359),j=r(4912),w=r(8382),N=r(1307),Z=r(184);var b=function(e){var t=e.stock;return(0,Z.jsxs)("div",{className:"availability-label",children:[!t&&(0,Z.jsx)(N.r,{className:"icon out-of-stock"}),t&&(0,Z.jsx)(w.r,{className:"icon in-stock"}),(0,Z.jsxs)("span",{className:"stock",children:[!t&&"out of stock",t&&"".concat(t," in stock")]})]})};var y=(0,d.Pi)((function(e){var t=e.product,r=(0,i.useState)(!1),s=(0,a.Z)(r,2),o=s[0],u=s[1],d=(0,i.useContext)(l.Z),w=d.user,N=d.cart,y=d.notifications,S=w.id,k=N.id,I=t.name,P=t.price,R=t.discount,A=t.brand.id,L=t.type.id,O=t.reviews,B=t.specificationsByCategory,C=t.id,E=t.images,V=t.rating,H=t.stock,J=t.thumbnail,M=t.discountedPrice,q=E.map((function(e){return"".concat("https://deviceshop.onrender.com/").concat(e)})),G=(0,p.zq)(B),T=function(){var e=(0,n.Z)(c().mark((function e(){var r,n,a,s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),setTimeout((function(){return u(!1)}),1500),!w.isGuest){e.next=8;break}return r={id:(new Date).toString(),shopproduct:t,price:M,addons:[]},localStorage.getItem("guestItems")?((a=JSON.parse(localStorage.getItem("guestItems"))).push(r),localStorage.setItem("guestItems",JSON.stringify(a))):(n=[r],localStorage.setItem("guestItems",JSON.stringify(n))),N.addItem(r),y.message(["".concat(I),"was added to your cart"],g.MA,3e3,J),e.abrupt("return");case 8:return e.prev=8,s={userId:S,cartId:k,price:M,brandId:A,typeId:L,shopProductId:C},e.next=12,(0,x.ZY)(s);case 12:i=e.sent,N.addItem(i),y.message(["".concat(I),"was added to your cart"],g.MA,3e3,J),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),y.error(e.t0.response.data.message);case 20:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)("div",{className:"top-info-row",children:[(0,Z.jsx)(f.Z,{propImages:q,instant:!0}),(0,Z.jsxs)("div",{className:"right-col",children:[R&&(0,Z.jsx)(h.Z,{discount:R}),(0,Z.jsx)(j.Z,{price:P,discount:R}),(0,Z.jsx)("span",{className:"name",children:I}),(0,Z.jsx)("span",{className:"specs-teaser",children:G}),(0,Z.jsx)(m.Z,{rating:V,reviewsLength:O.length}),(0,Z.jsx)(b,{stock:H}),(0,Z.jsx)(v.Z,{className:"add-to-cart ".concat(o&&"blocked"),onClick:T,buttonStyle:"secondary",children:"Add to cart"})]})]})})),S=r(2175),k=r(2102),I=r(2982),P=r(1413),R=r(4942),A=r(8152),L=r(8613),O=r(773),B=r(2249),C=r(9372);function E(e){var t=e.review;if(!t)return null;if(!t.orderedproduct||!t.shopproduct)return null;var r=t.user,n=r.avatar,a=r.firstName,s=r.lastName,c=t.rating,i=t.id,o=t.body,u="";t.shopproduct&&(u=t.shopproduct.name);var d=t.createdAt,l=t.updatedAt,f=t.orderedproduct.order.createdAt,v=(0,p.zB)(f),h=null;return d!==l&&(h=(0,p.zB)(l)),(0,Z.jsxs)("div",{className:"review",children:[(0,Z.jsxs)("div",{className:"user",children:[(0,Z.jsx)("img",{src:"".concat("https://deviceshop.onrender.com/").concat(n),alt:"User avatar",className:"avatar"}),(0,Z.jsx)("span",{className:"name",children:"".concat(a," ").concat(s)}),(0,Z.jsx)(O.Z,{rating:c,nameForKey:i}),h&&(0,Z.jsxs)("span",{children:["Updated at",h]})]}),(0,Z.jsxs)("div",{className:"title-row",children:[(0,Z.jsx)("h4",{children:u}),(0,Z.jsxs)("span",{className:"purchase-verification",children:[(0,Z.jsx)(w.r,{}),"Purchased ".concat(v)]})]}),(0,Z.jsx)("p",{className:"body",children:o}),(0,Z.jsx)("div",{className:"divider"})]})}var V=function(e){var t=e.shopProductId,r=e.rating,s=(0,i.useState)(!0),o=(0,a.Z)(s,2),u=o[0],d=o[1],l=(0,i.useState)("relevance"),f=(0,a.Z)(l,2),h=f[0],x=f[1],g=(0,i.useState)([]),j=(0,a.Z)(g,2),w=j[0],N=j[1],b=(0,i.useState)(0),y=(0,a.Z)(b,2),S=y[0],k=y[1],O=(0,C.Z)({itemsPerPage:3,itemsInDb:S}),V=O.page,H=O.pageLimitReached,J=O.changePage,M=function(){return{where:{shopProductId:t},limit:3,order:(0,R.Z)({},h,!0),page:V}},q=function(){var e=(0,n.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),t=V+1,e.next=5,(0,L.Bt)((0,P.Z)((0,P.Z)({},M()),{},{page:t}));case 5:r=e.sent,J(t),N([].concat((0,I.Z)(w),(0,I.Z)(r.rows)));case 8:return e.prev=8,d(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,,8,11]])})))();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){(0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.Bt)((0,P.Z)({},M()));case 3:t=e.sent,N(t.rows),k(t.count);case 6:return e.prev=6,d(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})))()}),[]);var G=(0,p.T4)(Number(r)),T="Relevance";"relevance"===h&&(T="Relevance"),"byLowestRated"===h&&(T="Rating: Low to High"),"byHighestRated"===h&&(T="Rating: High to Low");var z=function(){var e=(0,n.Z)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.Bt)((0,P.Z)((0,P.Z)({},M()),{},{limit:3*V,order:(0,R.Z)({},t,!0)}));case 2:r=e.sent,N(r.rows),x(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=[{label:"Relevance",callback:function(){return z("relevance")}},{label:"Rating: High to Low",callback:function(){return z("byHighestRated")}},{label:"Rating: Low to High",callback:function(){return z("byLowestRated")}}],U=0===w.length;return(0,Z.jsxs)("div",{className:"reviews ".concat(u&&"loading"," ").concat(U&&"no-reviews"),children:[(0,Z.jsxs)("div",{className:"header-elements",children:[(0,Z.jsx)("h4",{className:"section-header",children:"Product reviews"}),U&&(0,Z.jsx)("span",{className:"no-reviews",children:"Product has not been reviewed."}),!U&&(0,Z.jsx)(m.Z,{rating:G,reviewsLength:S})]}),!U&&(0,Z.jsx)(A.Z,{sortButtons:D,label:T}),!U&&(0,Z.jsx)("div",{className:"divider"}),!U&&(0,Z.jsx)(B.Z,{className:"reviews-ul",items:w,renderAs:function(e){return(0,Z.jsx)("li",{children:(0,Z.jsx)(E,{review:e})},e.id)}}),!U&&(0,Z.jsx)(v.Z,{onClick:q,className:"next-page-button ".concat((u||H)&&"blocked"," ").concat(H&&"limit-reached"),children:"Show more"})]})},H=r(7119),J=r(5471),M=r(7163);var q=function(e){var t=e.orderedProduct,r=e.setShowReviewModal,n=(0,i.useState)(!1),s=(0,a.Z)(n,2),c=s[0],o=s[1];return(0,i.useEffect)((function(){t&&o(!0)}),[t]),(0,Z.jsxs)("div",{className:"leave-a-rating ".concat(c&&"show"),children:[(0,Z.jsx)(w.r,{className:"star"}),(0,Z.jsxs)("span",{children:["You are eligible to",(0,Z.jsx)(M.Z,{children:(0,Z.jsx)("button",{className:"show-modal-button",onClick:function(){return r(!0)},type:"button",children:"leave a rating"})}),"for your purchased product!"]})]})},G=r(8110);var T=function(){var e=(0,i.useContext)(l.Z),t=e.notifications,r=e.user,s=(0,i.useState)(!0),d=(0,a.Z)(s,2),f=d[0],v=d[1],h=(0,i.useState)(!1),m=(0,a.Z)(h,2),j=m[0],w=m[1],N=(0,i.useState)(),b=(0,a.Z)(N,2),I=b[0],P=b[1],R=(0,i.useState)(),A=(0,a.Z)(R,2),L=A[0],O=A[1],B=(0,o.s0)(),C=(0,o.UO)().title;return(0,i.useEffect)((function(){(0,n.Z)(c().mark((function e(){var n,a,s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.MX)(C);case 3:if(n=e.sent){e.next=7;break}return B(g.Im),e.abrupt("return");case 7:if(O(n),a=n.id,localStorage.getItem("recentlyViewedIds")?(-1===(null===(s=JSON.parse(localStorage.getItem("recentlyViewedIds")))||void 0===s?void 0:s.indexOf(a))&&s.unshift(a),localStorage.setItem("recentlyViewedIds",JSON.stringify(s.slice(0,4)))):localStorage.setItem("recentlyViewedIds",JSON.stringify([a])),r.isGuest){e.next=21;break}return e.prev=11,e.next=14,(0,x.n_)(n.id);case 14:i=e.sent,P(i),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),t.message("".concat(e.t0.response.data.message));case 21:return e.prev=21,v(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,,21,24],[11,18]])})))()}),[C]),(0,Z.jsxs)("div",{id:"shop-product-page",children:[I&&(0,Z.jsx)(q,{setShowReviewModal:w,orderedProduct:I}),(0,Z.jsxs)(G.Z,{className:"shop-product-page ".concat(f&&"loading"),children:[(0,Z.jsx)(J.Z,{show:j,orderedProduct:I,close:function(){return w(!1)},productName:(null===L||void 0===L?void 0:L.name)||""}),L&&(0,Z.jsx)(y,{product:L}),(0,Z.jsxs)("div",{className:"collapsible-info-area",children:[L&&(0,Z.jsx)(k.Z,{header:"Description",children:(0,Z.jsx)("span",{className:"description",children:L.description})}),L&&(0,Z.jsx)(k.Z,{header:"Specifications",children:(0,Z.jsx)(S.Z,{specificationCategories:(0,p.iH)(L.specificationsByCategory)})}),L&&(0,Z.jsx)(k.Z,{header:"Returns & warranty",children:(0,Z.jsxs)("div",{className:"returns-and-warranty",children:[(0,Z.jsxs)("div",{className:"thirty-day-return",children:[(0,Z.jsx)("span",{className:"label",children:"30-day return"}),(0,Z.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."})]}),(0,Z.jsxs)("div",{className:"info warranty",children:[(0,Z.jsx)("span",{className:"label",children:"Warranty"}),(0,Z.jsx)("span",{className:"value",children:"24 months"})]}),(0,Z.jsx)("div",{className:"divider"}),(0,Z.jsxs)("div",{className:"info repairs",children:[(0,Z.jsx)("span",{className:"label",children:"Repairs"}),(0,Z.jsx)("span",{className:"value",children:"Available for a fee"})]})]})})]}),(0,Z.jsx)("div",{className:"divider wide"}),L&&(0,Z.jsx)(V,{shopProductId:L.id,rating:L.rating})]}),(0,Z.jsx)(H.Z,{})]})}}}]);
//# sourceMappingURL=986.f203507b.chunk.js.map