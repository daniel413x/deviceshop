"use strict";(self.webpackChunkdeviceshop=self.webpackChunkdeviceshop||[]).push([[986],{9561:function(e,t,n){n(2791);var r=n(184);t.Z=function(e){var t=e.discount;return(0,r.jsxs)("span",{className:"discount-tag",children:["-",t,"%"]})}},4912:function(e,t,n){n(2791);var r=n(1733),a=n(184);function s(e){var t=e.price,n=e.discount,s=(0,r.T4)((0,r.ti)(t)),c=(0,r.T4)((0,r.ti)(t,n));return(0,a.jsxs)("div",{className:"price-tags ".concat(n&&"with-discount"),children:[(0,a.jsxs)("span",{className:"undiscounted-price",children:["$",s]}),n&&(0,a.jsxs)("span",{className:"discounted-price",children:["$",c]})]})}s.defaultProps={discount:""},t.Z=s},7119:function(e,t,n){var r=n(5861),a=n(885),s=n(7757),c=n.n(s),i=n(2791),o=n(3641),u=n(2249),d=n(6632),l=n(184);t.Z=function(){var e=(0,i.useState)([]),t=(0,a.Z)(e,2),n=t[0],s=t[1],p=localStorage.getItem("recentlyViewedIds");return(0,i.useEffect)((function(){p&&(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=5;break}return e.next=3,(0,o.t2)({where:{id:JSON.parse(p)}});case 3:t=e.sent,s(t.rows.slice().sort((function(e,t){var n=p.indexOf(e.id);return p.indexOf(t.id)>n?-1:1})));case 5:case"end":return e.stop()}}),e)})))()}),[p]),0===n.length?null:(0,l.jsxs)("div",{className:"recently-viewed-products",children:[(0,l.jsx)("div",{className:"divider"}),(0,l.jsx)("h4",{className:"header",children:"Recently viewed products"}),(0,l.jsx)(u.Z,{className:"products-ul",items:n,renderAs:function(e){return(0,l.jsx)("li",{children:(0,l.jsx)(d.Z,{product:e,expanded:!0})},e.id)}})]})}},6632:function(e,t,n){n(2791);var r=n(501),a=n(4359),s=n(1733),c=n(2249),i=n(4912),o=n(773),u=n(4256),d=n(184);function l(e){var t=e.product,n=e.expanded,l=e.listView,p=t.name,f=t.price,v=t.discount,h=t.brand.name,m=t.type.name,x=t.rating,g=t.reviews,j=t.specificationsByCategory,w=t.id,Z=t.thumbnail,N=(0,s.Cb)(p),b=l?(0,s.BL)(j):(0,s.zq)(j),y=n&&!l,S=l;return(0,d.jsxs)(r.OL,{className:"shop-product-card ".concat(n&&"expanded"," ").concat(l&&"list-view"),to:"/".concat(a.lf,"/").concat(N),title:p,children:[(0,d.jsx)(u.Z,{children:(0,d.jsxs)("div",{className:"img-wrapper",children:[(0,d.jsx)("img",{src:"".concat("https://deviceshop.onrender.com/").concat(Z),alt:"Shop now"}),(0,d.jsx)(i.Z,{price:f,discount:v})]})}),(0,d.jsxs)("div",{className:"lower-col",children:[(0,d.jsx)("span",{className:"name",children:p}),(0,d.jsxs)("div",{className:"brand-rating-row",children:[!n&&(0,d.jsx)("span",{className:"brand",children:h}),(0,d.jsx)(o.Z,{rating:Number(x),nameForKey:p}),n&&(0,d.jsx)("span",{className:"review-count",children:"(".concat(g.length,")")})]}),y&&(0,d.jsx)("div",{className:"attributes",children:b}),S&&(0,d.jsx)("div",{className:"attributes",children:(0,d.jsx)(c.Z,{items:b,className:"attributes-column-ul",renderAs:function(e){return(0,d.jsx)("li",{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"label",children:e.category}),(0,d.jsx)(c.Z,{items:e.values,className:"values-ul",renderAs:function(t,n){return(0,d.jsx)("li",{children:(0,d.jsx)("span",{children:t})},"".concat(w).concat(e.category).concat(t).concat(n))}})]})},"".concat(w).concat(e.category))}})}),n&&(0,d.jsx)("div",{className:"type",children:m})]})]})}l.defaultProps={expanded:!1,listView:!1},t.Z=l},4256:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(2791),a=n(5861),s=n(885),c=n(7757),i=n.n(c);function o(e,t){var n;return"string"===typeof e?t?(null!==(n=t[e])&&void 0!==n||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}var u=function(e){return"function"===typeof e},d={any:0,all:1};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.root,a=n.margin,s=n.amount,c=void 0===s?"any":s;if("undefined"===typeof IntersectionObserver)return function(){};var i=o(e),l=new WeakMap,p=function(e){e.forEach((function(e){var n=l.get(e.target);if(e.isIntersecting!==Boolean(n))if(e.isIntersecting){var r=t(e);u(r)?l.set(e.target,r):f.unobserve(e.target)}else n&&(n(e),l.delete(e.target))}))},f=new IntersectionObserver(p,{root:r,rootMargin:a,threshold:"number"===typeof c?c:d[c]});return i.forEach((function(e){return f.observe(e)})),function(){return f.disconnect()}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.root,a=t.margin,c=t.amount,i=t.once,o=void 0!==i&&i,u=(0,r.useState)(!1),d=(0,s.Z)(u,2),p=d[0],f=d[1];return(0,r.useEffect)((function(){if(!(!e.current||o&&p)){var t={root:n&&n.current||void 0,margin:a,amount:"some"===c?"any":c};return l(e.current,(function(){return f(!0),o?void 0:function(){return f(!1)}}),t)}}),[n,e,a,o]),p}var f=function(e){var t=e.ref,n=e.func,c=e.timeout,o=void 0===c?350:c,u=(0,r.useState)(!1),d=(0,s.Z)(u,2),l=d[0],f=d[1],v=(0,r.useState)(!1),h=(0,s.Z)(v,2),m=h[0],x=h[1],g=p(t);return(0,r.useEffect)((function(){g&&!l&&setTimeout((function(){g&&(f(!0),n&&(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:return e.prev=3,x(!0),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})))())}),o)}),[g]),{fixated:l,loaded:m}},v=n(184),h=(0,r.forwardRef)((function(e,t){var n=e.className,a=e.children,s=e.id,c=e.timeout,i=e.func,o=(0,r.useRef)(null),u=t||o,d=f({ref:u,func:i,timeout:c,id:s}),l=d.fixated,p=d.loaded,h=i&&!p;return(0,v.jsx)("div",{className:"".concat(n," shown-in-view ").concat((i&&p||!i&&l)&&"show"),id:s,ref:u,style:{height:h?"100vh":""},children:a})}));h.defaultProps={className:"",id:void 0,timeout:void 0,func:void 0};var m=h},8152:function(e,t,n){n(2791);var r=n(259),a=n(184);t.Z=function(e){var t=e.sortButtons,n=e.label;return(0,a.jsxs)("div",{className:"sort-dropdown",children:[(0,a.jsx)("span",{children:"Sort by:"}),(0,a.jsx)(r.Z,{label:n||t[0].label,to:t,dropdownIcon:"angle",colorStyle:"gray"}),(0,a.jsx)("div",{className:"divider vertical"})]})}},9372:function(e,t,n){var r=n(1413),a=n(885),s=n(2791),c=n(1733),i=n(584);t.Z=function(e){var t=e.itemsPerPage,n=e.itemsInDb,o=e.concurrentlySetQuery,u=(0,i.Z)(o?{page:"1"}:{}),d=u.searchParams,l=u.setSearchParams,p=u.searchParamsRecord,f=Number(d.get("page"))||1,v=(0,s.useState)(1),h=(0,a.Z)(v,2),m=h[0],x=h[1],g=(0,s.useState)(1),j=(0,a.Z)(g,2),w=j[0],Z=j[1],N=(0,s.useState)(!1),b=(0,a.Z)(N,2),y=b[0],S=b[1],k=function(e){x(e>w||e<1?w:e),o&&l((0,r.Z)((0,r.Z)({},p),{},{page:e.toString()}))};return(0,s.useEffect)((function(){var e=(0,c.WV)(n,t);Z(e||1),e>0&&m>e&&k(e)}),[n,t]),(0,s.useEffect)((function(){m!==f&&x(f)}),[f]),(0,s.useEffect)((function(){S(m===w)}),[m,w,f]),{page:m,pageLimit:w,pageLimitReached:y,changePage:k,nextPage:function(){return k(m+1)},prevPage:function(){return k(m-1)}}}},1154:function(e,t,n){n.d(t,{U$:function(){return u},ZY:function(){return i},n_:function(){return o}});var r=n(5861),a=n(7757),s=n.n(a),c=n(5229),i=function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.post("api/orderedproduct",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.get("api/review/eligibility/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.delete("api/orderedproduct/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},3986:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var r=n(5861),a=n(885),s=n(7757),c=n.n(s),i=n(2791),o=n(6871),u=n(3641),d=n(32),l=n(3958),p=n(1733),f=n(6252),v=n(3426),h=n(9561),m=n(3910),x=n(1154),g=n(4359),j=n(4912),w=n(8382),Z=n(1307),N=n(184);var b=function(e){var t=e.stock;return(0,N.jsxs)("div",{className:"availability-label",children:[!t&&(0,N.jsx)(Z.r,{className:"icon out-of-stock"}),t&&(0,N.jsx)(w.r,{className:"icon in-stock"}),(0,N.jsxs)("span",{className:"stock",children:[!t&&"out of stock",t&&"".concat(t," in stock")]})]})},y=n(7155);var S=(0,d.Pi)((function(e){var t=e.product,n=(0,i.useState)(!1),s=(0,a.Z)(n,2),o=s[0],u=s[1],d=(0,i.useContext)(l.Z),w=d.user,Z=d.cart,S=d.notifications,k=t.name,I=t.price,P=t.discount,R=t.brand.id,L=t.type.id,A=t.reviews,B=t.specificationsByCategory,C=t.id,E=t.images,O=t.rating,V=t.stock,H=t.thumbnail,M=t.discountedPrice,q=E.map((function(e){return"".concat("https://deviceshop.onrender.com/").concat(e)})),T=(0,p.zq)(B),z=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),setTimeout((function(){return u(!1)}),1500),e.prev=2,Z.id!==g._5){e.next=11;break}return e.next=6,(0,y.l9)({guest:!0});case 6:t=e.sent,n=t.user,r=t.cart,w.set(n),Z.set(r);case 11:return a={userId:w.id,cartId:Z.id,price:M,brandId:R,typeId:L,shopProductId:C},e.next=14,(0,x.ZY)(a);case 14:s=e.sent,Z.addItem(s),S.message(["".concat(k),"was added to your cart"],g.MA,3e3,H),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),S.error(e.t0.response.data.message);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)("div",{className:"top-info-row",children:[(0,N.jsx)(f.Z,{propImages:q,instant:!0}),(0,N.jsxs)("div",{className:"right-col",children:[P&&(0,N.jsx)(h.Z,{discount:P}),(0,N.jsx)(j.Z,{price:I,discount:P}),(0,N.jsx)("span",{className:"name",children:k}),(0,N.jsx)("span",{className:"specs-teaser",children:T}),(0,N.jsx)(m.Z,{rating:O,reviewsLength:A.length}),(0,N.jsx)(b,{stock:V}),(0,N.jsx)(v.Z,{className:"add-to-cart ".concat(o&&"blocked"),onClick:z,buttonStyle:"secondary",children:"Add to cart"})]})]})})),k=n(2175),I=n(2102),P=n(2982),R=n(1413),L=n(4942),A=n(8152),B=n(8613),C=n(773),E=n(2249),O=n(9372);function V(e){var t=e.review;if(!t)return null;if(!t.orderedproduct||!t.shopproduct)return null;var n=t.user,r=n.avatar,a=n.firstName,s=n.lastName,c=t.rating,i=t.id,o=t.body,u="";t.shopproduct&&(u=t.shopproduct.name);var d=t.createdAt,l=t.updatedAt,f=t.orderedproduct.order.createdAt,v=(0,p.zB)(f),h=null;return d!==l&&(h=(0,p.zB)(l)),(0,N.jsxs)("div",{className:"review",children:[(0,N.jsxs)("div",{className:"user",children:[(0,N.jsx)("img",{src:"".concat("https://deviceshop.onrender.com/").concat(r),alt:"User avatar",className:"avatar"}),(0,N.jsx)("span",{className:"name",children:"".concat(a," ").concat(s)}),(0,N.jsx)(C.Z,{rating:c,nameForKey:i}),h&&(0,N.jsxs)("span",{children:["Updated at",h]})]}),(0,N.jsxs)("div",{className:"title-row",children:[(0,N.jsx)("h4",{children:u}),(0,N.jsxs)("span",{className:"purchase-verification",children:[(0,N.jsx)(w.r,{}),"Purchased ".concat(v)]})]}),(0,N.jsx)("p",{className:"body",children:o}),(0,N.jsx)("div",{className:"divider"})]})}var H=function(e){var t=e.shopProductId,n=e.rating,s=(0,i.useState)(!0),o=(0,a.Z)(s,2),u=o[0],d=o[1],l=(0,i.useState)("relevance"),f=(0,a.Z)(l,2),h=f[0],x=f[1],g=(0,i.useState)([]),j=(0,a.Z)(g,2),w=j[0],Z=j[1],b=(0,i.useState)(0),y=(0,a.Z)(b,2),S=y[0],k=y[1],I=(0,O.Z)({itemsPerPage:3,itemsInDb:S}),C=I.page,H=I.pageLimitReached,M=I.changePage,q=function(){return{where:{shopProductId:t},limit:3,order:(0,L.Z)({},h,!0),page:C}},T=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,r.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),t=C+1,e.next=5,(0,B.Bt)((0,R.Z)((0,R.Z)({},q()),{},{page:t}));case 5:n=e.sent,M(t),Z([].concat((0,P.Z)(w),(0,P.Z)(n.rows)));case 8:return e.prev=8,d(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,,8,11]])})))();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,B.Bt)((0,R.Z)({},q()));case 3:t=e.sent,Z(t.rows),k(t.count);case 6:return e.prev=6,d(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})))()}),[]);var z=(0,p.T4)(Number(n)),G="Relevance";"relevance"===h&&(G="Relevance"),"byLowestRated"===h&&(G="Rating: Low to High"),"byHighestRated"===h&&(G="Rating: High to Low");var J=function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.Bt)((0,R.Z)((0,R.Z)({},q()),{},{limit:3*C,order:(0,L.Z)({},t,!0)}));case 2:n=e.sent,Z(n.rows),x(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=[{label:"Relevance",callback:function(){return J("relevance")}},{label:"Rating: High to Low",callback:function(){return J("byHighestRated")}},{label:"Rating: Low to High",callback:function(){return J("byLowestRated")}}],D=0===w.length;return(0,N.jsxs)("div",{className:"reviews ".concat(u&&"loading"," ").concat(D&&"no-reviews"),children:[(0,N.jsxs)("div",{className:"header-elements",children:[(0,N.jsx)("h4",{className:"section-header",children:"Product reviews"}),D&&(0,N.jsx)("span",{className:"no-reviews",children:"Product has not been reviewed."}),!D&&(0,N.jsx)(m.Z,{rating:z,reviewsLength:S})]}),!D&&(0,N.jsx)(A.Z,{sortButtons:U,label:G}),!D&&(0,N.jsx)("div",{className:"divider"}),!D&&(0,N.jsx)(E.Z,{className:"reviews-ul",items:w,renderAs:function(e){return(0,N.jsx)("li",{children:(0,N.jsx)(V,{review:e})},e.id)}}),!D&&(0,N.jsx)(v.Z,{onClick:T,className:"next-page-button ".concat((u||H)&&"blocked"," ").concat(H&&"limit-reached"),children:"Show more"})]})},M=n(7119),q=n(5471),T=n(7163);var z=function(e){var t=e.orderedProduct,n=e.setShowReviewModal,r=(0,i.useState)(!1),s=(0,a.Z)(r,2),c=s[0],o=s[1];return(0,i.useEffect)((function(){t&&o(!0)}),[t]),(0,N.jsxs)("div",{className:"leave-a-rating ".concat(c&&"show"),children:[(0,N.jsx)(w.r,{className:"star"}),(0,N.jsxs)("span",{children:["You are eligible to",(0,N.jsx)(T.Z,{children:(0,N.jsx)("button",{className:"show-modal-button",onClick:function(){return n(!0)},type:"button",children:"leave a rating"})}),"for your purchased product!"]})]})},G=n(8110);var J=function(){var e=(0,i.useContext)(l.Z),t=e.notifications,n=e.user,s=(0,i.useState)(!0),d=(0,a.Z)(s,2),f=d[0],v=d[1],h=(0,i.useState)(!1),m=(0,a.Z)(h,2),j=m[0],w=m[1],Z=(0,i.useState)(),b=(0,a.Z)(Z,2),y=b[0],P=b[1],R=(0,i.useState)(),L=(0,a.Z)(R,2),A=L[0],B=L[1],C=(0,o.s0)(),E=(0,o.UO)().title;return(0,i.useEffect)((function(){(0,r.Z)(c().mark((function e(){var r,a,s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.MX)(E);case 3:if(r=e.sent){e.next=7;break}return C(g.Im),e.abrupt("return");case 7:if(B(r),a=r.id,localStorage.getItem("recentlyViewedIds")?(-1===(null===(s=JSON.parse(localStorage.getItem("recentlyViewedIds")))||void 0===s?void 0:s.indexOf(a))&&s.unshift(a),localStorage.setItem("recentlyViewedIds",JSON.stringify(s.slice(0,4)))):localStorage.setItem("recentlyViewedIds",JSON.stringify([a])),n.isGuest){e.next=21;break}return e.prev=11,e.next=14,(0,x.n_)(r.id);case 14:i=e.sent,P(i),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),t.message("".concat(e.t0.response.data.message));case 21:return e.prev=21,v(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,,21,24],[11,18]])})))()}),[E]),(0,N.jsxs)("div",{id:"shop-product-page",children:[y&&(0,N.jsx)(z,{setShowReviewModal:w,orderedProduct:y}),(0,N.jsxs)(G.Z,{className:"shop-product-page ".concat(f&&"loading"),children:[(0,N.jsx)(q.Z,{show:j,orderedProduct:y,close:function(){return w(!1)},productName:(null===A||void 0===A?void 0:A.name)||""}),A&&(0,N.jsx)(S,{product:A}),(0,N.jsxs)("div",{className:"collapsible-info-area",children:[A&&(0,N.jsx)(I.Z,{header:"Description",children:(0,N.jsx)("span",{className:"description",children:A.description})}),A&&(0,N.jsx)(I.Z,{header:"Specifications",children:(0,N.jsx)(k.Z,{specificationCategories:(0,p.iH)(A.specificationsByCategory)})}),A&&(0,N.jsx)(I.Z,{header:"Returns & warranty",children:(0,N.jsxs)("div",{className:"returns-and-warranty",children:[(0,N.jsxs)("div",{className:"thirty-day-return",children:[(0,N.jsx)("span",{className:"label",children:"30-day return"}),(0,N.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."})]}),(0,N.jsxs)("div",{className:"info warranty",children:[(0,N.jsx)("span",{className:"label",children:"Warranty"}),(0,N.jsx)("span",{className:"value",children:"24 months"})]}),(0,N.jsx)("div",{className:"divider"}),(0,N.jsxs)("div",{className:"info repairs",children:[(0,N.jsx)("span",{className:"label",children:"Repairs"}),(0,N.jsx)("span",{className:"value",children:"Available for a fee"})]})]})})]}),(0,N.jsx)("div",{className:"divider wide"}),A&&(0,N.jsx)(H,{shopProductId:A.id,rating:A.rating})]}),(0,N.jsx)(M.Z,{})]})}}}]);
//# sourceMappingURL=986.a251d5b5.chunk.js.map