"use strict";(self.webpackChunkdeviceshop=self.webpackChunkdeviceshop||[]).push([[673],{6512:function(e,n,t){t.d(n,{r:function(){return d}});var r,a,s=t(2791),c=["title","titleId"];function o(){return o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function u(e,n){var t=e.title,u=e.titleId,d=i(e,c);return s.createElement("svg",o({width:37,height:36,viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":u},d),t?s.createElement("title",{id:u},t):null,r||(r=s.createElement("path",{d:"M3.5 6V27L10.7 21.6C11.219 21.21 11.8505 21 12.5 21H24.5C25.2956 21 26.0587 20.6839 26.6213 20.1213C27.1839 19.5587 27.5 18.7956 27.5 18V6C27.5 5.20435 27.1839 4.44129 26.6213 3.87868C26.0587 3.31607 25.2956 3 24.5 3H6.5C5.70435 3 4.94129 3.31607 4.37868 3.87868C3.81607 4.44129 3.5 5.20435 3.5 6ZM6.5 21V6H24.5V18H11.501C10.8516 17.9983 10.2195 18.209 9.701 18.6L6.5 21Z",fill:"#4D4D4D"})),a||(a=s.createElement("path",{d:"M33.5 33V13.5C33.5 12.7044 33.1839 11.9413 32.6213 11.3787C32.0587 10.8161 31.2956 10.5 30.5 10.5V27L27.299 24.6C26.7805 24.209 26.1484 23.9983 25.499 24H11C11 24.394 11.0776 24.7841 11.2284 25.1481C11.3791 25.512 11.6001 25.8427 11.8787 26.1213C12.1573 26.3999 12.488 26.6209 12.852 26.7716C13.2159 26.9224 13.606 27 14 27H24.5C25.1495 27 25.781 27.21 26.3 27.6L33.5 33Z",fill:"#4D4D4D"})))}var d=s.forwardRef(u);t.p},5505:function(e,n,t){t(2791);var r=t(6512),a=t(184);function s(e){var n=e.className;return(0,a.jsxs)("button",{className:"chat-now ".concat(n),type:"button",children:[(0,a.jsx)("span",{className:"need-assitance-text",children:"Need assistance?"}),(0,a.jsx)(r.r,{}),(0,a.jsx)("span",{className:"chat-now-text",children:"Chat Now"})]})}s.defaultProps={className:""},n.Z=s},7142:function(e,n,t){var r=t(2791),a=t(7321),s=t(3993),c=t(4985),o=t(184),i=(0,r.forwardRef)((function(e,n){var t=e.onMouseDown,i=n||(0,r.useRef)(),u=(0,c.Z)("Enter"),d=(0,s.Z)();return(0,r.useEffect)((function(){d===i.current&&t()}),[u]),(0,o.jsx)("button",{ref:i,className:"close-button",onClick:t,onMouseDown:t,type:"button",children:(0,o.jsx)(a.r,{})})}));n.Z=i},1569:function(e,n,t){t(2791);var r=t(3426),a=t(7142),s=t(8886),c=t(184);function o(e){var n=e.show,t=e.close,o=e.callback,i=e.prompt,u=e.title;return(0,c.jsxs)(s.Z,{show:n,close:t,className:"confirmation-modal",id:"confirmation-modal",modalStyle:"warn",children:[u&&(0,c.jsxs)("div",{className:"window-header",children:[(0,c.jsx)("div",{className:"left-col",children:u}),(0,c.jsx)(a.Z,{onMouseDown:t})]}),(0,c.jsx)("div",{className:"body",children:i}),(0,c.jsxs)("div",{className:"bottom-buttons",children:[(0,c.jsx)(r.Z,{buttonStyle:"warn",onClick:function(){o(),t()},className:"confirm-button",children:"Confirm"}),(0,c.jsx)(r.Z,{buttonStyle:"warn",onClick:t,children:"Close"})]})]})}o.defaultProps={title:""},n.Z=o},9561:function(e,n,t){t(2791);var r=t(184);n.Z=function(e){var n=e.discount;return(0,r.jsxs)("span",{className:"discount-tag",children:["-",n,"%"]})}},8886:function(e,n,t){var r=t(885),a=t(8935),s=t.n(a),c=t(2791),o=t(4164),i=t(3958),u=t(4985),d=t(734),l=t(9182),f=t(4359),m=t(184),v=(0,c.forwardRef)((function(e,n){var t,a=e.show,v=e.children,p=e.close,h=e.className,x=e.size,j=e.id,w=e.modalStyle,Z=(0,c.useContext)(i.Z).modals,b=(0,c.useState)(!1),N=(0,r.Z)(b,2),y=N[0],g=N[1],k=n||(0,c.useRef)(null),C=(0,l.Z)(),S=C.width,I=C.height;(0,d.Z)(k,p);var E=(0,u.Z)("Escape");return(0,c.useEffect)((function(){a?Z.queue(j):(Z.unqueue(j),setTimeout((function(){var e;return null===(e=k.current)||void 0===e?void 0:e.scrollTo(0,0)}),500))}),[a]),(0,c.useEffect)((function(){E&&p()}),[E]),(0,c.useEffect)((function(){k.current&&(k.current.scrollHeight>I?g(!0):g(!1))}),[S,I,null===(t=k.current)||void 0===t?void 0:t.scrollHeight]),o.createPortal((0,m.jsx)(s(),{active:a!==f.k,paused:!a,focusTrapOptions:{escapeDeactivates:!1},children:(0,m.jsxs)("div",{className:"modal ".concat(a&&"show"," ").concat(h," ").concat(x," ").concat(y&&"handle-overflow"," ").concat(w),children:[(0,m.jsx)("div",{className:"overlay"}),(0,m.jsx)("div",{className:"window",ref:k,children:v})]})}),document.getElementById("portal"))}));v.defaultProps={children:void 0,className:"",size:"",modalStyle:void 0},n.Z=v},7119:function(e,n,t){var r=t(5861),a=t(885),s=t(7757),c=t.n(s),o=t(2791),i=t(3641),u=t(2249),d=t(6632),l=t(184);n.Z=function(){var e=(0,o.useState)([]),n=(0,a.Z)(e,2),t=n[0],s=n[1],f=localStorage.getItem("recentlyViewedIds");return(0,o.useEffect)((function(){f&&(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=5;break}return e.next=3,(0,i.t2)({where:{id:JSON.parse(f)}});case 3:n=e.sent,s(n.rows.slice().sort((function(e,n){var t=f.indexOf(e.id);return f.indexOf(n.id)>t?-1:1})));case 5:case"end":return e.stop()}}),e)})))()}),[f]),0===t.length?null:(0,l.jsxs)("div",{className:"recently-viewed-products",children:[(0,l.jsx)("div",{className:"divider"}),(0,l.jsx)("h4",{className:"header",children:"Recently viewed products"}),(0,l.jsx)(u.Z,{className:"products-ul",items:t,renderAs:function(e){return(0,l.jsx)("li",{children:(0,l.jsx)(d.Z,{product:e,expanded:!0})},e.id)}})]})}},7163:function(e,n,t){var r=t(885),a=t(2791),s=t(3958),c=t(3993);n.Z=function(e){var n=e.children,t=(0,a.useContext)(s.Z).modals.noModals(),o=(0,a.useState)(document.activeElement),i=(0,r.Z)(o,2),u=i[0],d=i[1],l=(0,a.useRef)(null),f=(0,a.useRef)(!0);(0,a.useEffect)((function(){var e;f.current?f.current=!1:t&&u===l.current&&(null===(e=l.current)||void 0===e||e.focus())}),[t]);var m=(0,c.Z)();return(0,a.useEffect)((function(){t&&m===l.current&&d(m)}),[m]),a.cloneElement(n,{ref:l})}},3993:function(e,n,t){var r=t(885),a=t(2791);n.Z=function(){var e=(0,a.useState)(document.activeElement),n=(0,r.Z)(e,2),t=n[0],s=n[1],c=function(){s(document.activeElement)};return(0,a.useEffect)((function(){return document.addEventListener("focusin",c),function(){document.removeEventListener("focusin",c)}}),[]),t}},1154:function(e,n,t){t.d(n,{U$:function(){return u},ZY:function(){return o},n_:function(){return i}});var r=t(5861),a=t(7757),s=t.n(a),c=t(5229),o=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.post("api/orderedproduct",n);case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.get("api/review/eligibility/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.delete("api/orderedproduct/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},4673:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var r=t(5861),a=t(885),s=t(7757),c=t.n(s),o=t(2791),i=t(32),u=t(2249),d=t(3958),l=t(501),f=t(1733),m=t(3426),v=t(2708),p=t(9561),h=t(4912),x=t(7142),j=t(184);var w=function(e){var n=e.orderedAddon,t=n.price,r=n.addon.name,a=(0,f.T4)((0,f.ti)(t));return(0,j.jsxs)("div",{className:"addon",children:[(0,j.jsxs)("div",{className:"info-row",children:[(0,j.jsx)("span",{className:"name",children:r}),(0,j.jsxs)("span",{className:"price",children:["$",a]})]}),(0,j.jsx)("div",{className:"divider"})]})},Z=t(4359),b=t(7163);var N=function(e){var n=e.orderedProduct,t=e.openDeleteModal,s=e.openWarrantyModal,i=e.openInsuranceModal,N=(0,o.useContext)(d.Z).user,y=n.shopproduct,g=n.addons,k=y.thumbnail,C=y.name,S=y.specifications,I=y.discount,E=y.id,O=y.price,A=(0,o.useState)(!0),P=(0,a.Z)(A,2),D=P[0],M=P[1],R=(0,o.useState)(),G=(0,a.Z)(R,2),T=G[0],H=G[1];(0,o.useEffect)((function(){N.isGuest&&(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.J)({where:{shopProductId:E}});case 3:n=e.sent,H((0,f.zq)(n.rows));case 5:return e.prev=5,M(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[0,,5,8]])})))(),H((0,f.zq)(S))}),[]);var J=(0,f.Cb)(C),L=!1;g&&g.length>0&&(L=!0);var V=null===g||void 0===g?void 0:g.find((function(e){return"warranty"===e.addon.category}));return(0,j.jsxs)("div",{className:"cart-item ".concat(D&&"loading"),children:[(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("img",{className:"thumbnail-col",src:"".concat("https://deviceshop.onrender.com/").concat(k),alt:"Thumbnail for ".concat(C)}),(0,j.jsxs)("div",{className:"text-col",children:[(0,j.jsx)("div",{className:"name-row",children:(0,j.jsx)(l.OL,{className:"name",to:"/".concat(Z.lf,"/").concat(J),children:C})}),(0,j.jsx)("p",{children:T}),(0,j.jsxs)("div",{className:"addons-buttons",children:[(0,j.jsx)(b.Z,{children:(0,j.jsx)(m.Z,{buttonStyle:"secondary",onClick:s,className:"warranty-button",children:V?"Change warranty":"Extend warranty"})}),(0,j.jsx)(b.Z,{children:(0,j.jsx)(m.Z,{onClick:i,buttonStyle:"secondary",className:"insurance-button",children:"Add insurance"})})]}),(0,j.jsxs)("div",{className:"price-row",children:[(0,j.jsx)(p.Z,{discount:I}),(0,j.jsx)(h.Z,{price:O,discount:I})]})]})]}),L&&(0,j.jsx)(u.Z,{className:"addons-ul",items:g,renderAs:function(e){return(0,j.jsx)("li",{children:(0,j.jsx)(w,{orderedAddon:e})},e.id)}}),(0,j.jsx)("div",{className:"divider"}),(0,j.jsx)(b.Z,{children:(0,j.jsx)(x.Z,{onMouseDown:t})})]})},y=t(7119),g=t(8886);function k(e){var n=e.addon,t=e.selectedAddonId,r=e.selectAddon,a=e.removeAddon,s=n.name,c=n.price,o=n.id,i=n.bulletPoints,d=(0,f.T4)((0,f.ti)(c)),l=t===o;return(0,j.jsxs)("div",{className:"addon-choice ".concat(t===o&&"selected"),children:[(0,j.jsxs)("div",{className:"info-col",children:[(0,j.jsxs)("span",{className:"price",children:["$",d]}),(0,j.jsx)("span",{className:"name",children:s}),i&&(0,j.jsx)(u.Z,{className:"bullet-points-ul",items:i,renderAs:function(e){return(0,j.jsx)("li",{children:e},e)}})]}),l?(0,j.jsx)(m.Z,{className:"remove-plan-button",buttonStyle:"accent-gray",onClick:function(){return a()},children:"Remove plan"}):(0,j.jsx)(m.Z,{className:"choose-plan-button",buttonStyle:"accent-gray",onClick:function(){return r(n)},children:"Choose plan"})]})}k.defaultProps={selectedAddonId:""};var C=(0,i.Pi)(k),S=t(5229),I=function(){var e=(0,r.Z)(c().mark((function e(n){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.y.get("api/addon",{params:n});case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)(c().mark((function e(n){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.G.post("api/orderedaddon",n);case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=(0,r.Z)(c().mark((function e(n){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.G.delete("api/orderedaddon/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function A(e){var n=e.id,t=e.name,s=e.thumbnail,i=e.close,l=e.category,f=e.passedInRef,m=(0,o.useState)(!0),v=(0,a.Z)(m,2),p=v[0],h=v[1],w=(0,o.useState)(),Z=(0,a.Z)(w,2),b=Z[0],N=Z[1],y=(0,o.useState)([]),k=(0,a.Z)(y,2),S=k[0],A=k[1],P=(0,o.useContext)(d.Z),D=P.user,M=P.cart,R=function(){var e=(0,r.Z)(c().mark((function e(){var t,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D.isGuest){e.next=7;break}return t=JSON.parse(localStorage.getItem("guestItems")),(r=t.find((function(e){return e.id===n})))&&(r.addons=r.addons.filter((function(e){return e.addonId!==b.id})),localStorage.setItem("guestItems",JSON.stringify(t.map((function(e){return e.id===r.id?r:e}))))),M.removeAddon(n,b.id),N(void 0),e.abrupt("return");case 7:if(!(a=M.findOrderedAddon(b.id))){e.next=15;break}return h(!0),e.next=12,O(a.id);case 12:M.removeAddon(n,b.id),N(void 0),h(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,r.Z)(c().mark((function e(t){var r,a,s,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=3;break}return e.next=3,R();case 3:if(!D.isGuest){e.next=8;break}return r=JSON.parse(localStorage.getItem("guestItems")),(a=r.find((function(e){return n===e.id})))&&(s={id:Date.toString(),addonId:t.id,addon:t,orderedProductId:n,category:l,price:t.price},a.addons?a.addons.push(s):a.addons=[s],localStorage.setItem("guestItems",JSON.stringify(r.map((function(e){return e.id===a.id?a:e})))),M.addAddon(n,s),N(t)),e.abrupt("return");case 8:return h(!0),e.next=11,E({addonId:t.id,orderedProductId:n,price:t.price,category:l});case 11:o=e.sent,M.addAddon(n,o),N(t),h(!1);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I({where:{category:n}}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(l);case 2:n=e.sent,A(n.rows),h(!1);case 5:case"end":return e.stop()}}),e)})))()}),[]),(0,o.useEffect)((function(){N(void 0);for(var e=function(e){for(var t=0;t<M.items.length;t+=1){var r;if((null===(r=M.items[t].addons)||void 0===r?void 0:r.find((function(n){return n.addonId===S[e].id})))&&M.items[t].id===n)return N(S[e]),{v:void 0}}},t=0;t<S.length;t+=1){var r=e(t);if("object"===typeof r)return r.v}}),[n]),(0,j.jsxs)(g.Z,{ref:f,show:n,close:i,className:"cartitem-addon ".concat(p&&"loading"),id:"cartitem-addon",size:"large",children:[(0,j.jsxs)("div",{className:"window-header",children:[(0,j.jsxs)("div",{className:"left-col",children:[(0,j.jsx)("img",{className:"thumbnail-col",src:"".concat("https://deviceshop.onrender.com/").concat(s),alt:"Thumbnail for ".concat(t)}),(0,j.jsx)("span",{className:"name",children:t})]}),(0,j.jsx)(x.Z,{onMouseDown:i})]}),(0,j.jsxs)("div",{className:"body",children:[(0,j.jsxs)("h2",{className:"header",children:[l," ","options"]}),(0,j.jsx)(u.Z,{className:"addon-choice-ul",items:S,renderAs:function(e){return(0,j.jsx)("li",{children:(0,j.jsx)(C,{addon:e,selectedAddonId:null===b||void 0===b?void 0:b.id,selectAddon:G,removeAddon:R})},e.id)}})]})]})}A.defaultProps={passedInRef:void 0};var P=(0,i.Pi)(A),D=t(6871),M=t(3535);var R=function(){var e=(0,D.s0)(),n=(0,o.useContext)(d.Z),t=n.cart,r=n.user,a=(0,f.Tb)(t.items),s=null;return t.items.length>0&&(s=r.isGuest?(0,j.jsx)(m.Z,{className:"checkout-link",buttonStyle:["match-navlink","secondary"],onClick:function(){r.setLoginToCheckout(!0),e("/".concat(Z.Kd))},children:"\u2192 Checkout"}):(0,j.jsx)(M.Z,{className:"checkout-link",buttonStyle:["match-button","secondary"],to:Z.S7,children:"\u2192 Checkout"})),(0,j.jsxs)("div",{className:"checkout",children:[(0,j.jsxs)("div",{className:"total ".concat(!s&&"fill-margin"),children:[(0,j.jsxs)("div",{className:"label",children:[(0,j.jsx)("span",{children:"Total"}),(0,j.jsx)("span",{children:t.items.length>0&&" (tax incl.)"})]}),(0,j.jsx)("div",{className:"divider"}),"$",a]}),s]})},G=t(5505),T=t(1569),H=t(1154),J=t(8110);function L(){return(0,j.jsxs)("div",{className:"checkout-col",children:[(0,j.jsx)(R,{}),(0,j.jsx)(G.Z,{})]})}var V=(0,i.Pi)((function(){var e=(0,o.useState)(void 0),n=(0,a.Z)(e,2),t=n[0],s=n[1],i=(0,o.useState)(),l=(0,a.Z)(i,2),f=l[0],m=l[1],v=(0,o.useState)(),p=(0,a.Z)(v,2),h=p[0],x=p[1],w=(0,o.useContext)(d.Z),Z=w.cart,b=w.user,g=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.isGuest){e.next=5;break}return t=JSON.parse(localStorage.getItem("guestItems")),localStorage.setItem("guestItems",JSON.stringify(t.filter((function(e){return e.id!==n})))),Z.removeItem(n),e.abrupt("return");case 5:return e.next=7,(0,H.U$)(n);case 7:Z.removeItem(n);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{children:[(0,j.jsxs)(J.Z,{id:"cart",header:"Cart",rightSideCol:(0,j.jsx)(L,{}),children:[(0,j.jsx)(T.Z,{show:t,close:function(){return s(void 0)},callback:function(){return g(t)},prompt:"Delete this item from your cart?"}),(0,j.jsx)(P,{id:null===f||void 0===f?void 0:f.id,name:null===f||void 0===f?void 0:f.shopproduct.name,thumbnail:null===f||void 0===f?void 0:f.shopproduct.thumbnail,close:function(){return m(void 0)},category:"warranty"}),(0,j.jsx)(P,{id:null===h||void 0===h?void 0:h.id,name:null===h||void 0===h?void 0:h.shopproduct.name,thumbnail:null===h||void 0===h?void 0:h.shopproduct.thumbnail,close:function(){return x(void 0)},category:"insurance"}),0===Z.items.length&&(0,j.jsx)("span",{className:"empty-cart",children:"Your cart is empty"}),(0,j.jsx)(u.Z,{className:"cart-items-ul",items:Z.items,renderAs:function(e){return(0,j.jsx)("li",{children:(0,j.jsx)(N,{orderedProduct:e,openDeleteModal:function(){return n=e.id,void s(n);var n},openWarrantyModal:function(){m(e)},openInsuranceModal:function(){x(e)}})},e.id)}})]}),(0,j.jsx)(y.Z,{})]})}))}}]);
//# sourceMappingURL=673.ca9968ce.chunk.js.map